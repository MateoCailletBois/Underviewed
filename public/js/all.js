function AlertController(){function a(){localStorage.setItem("closedAlert","yes")}function b(){null!=localStorage.getItem("closedAlert")?c.showAlert=!1:c.showAlert=!0}var c=this;c.showAlert=!0,c.setAlertLS=a,b()}function HeaderController(a,b){function c(){a.retrieveVideoSet()}function d(){e.title=""}var e=this;e.fileName=a.fileName,e.fileSource=a.fileSource,e.retrieveVideoSet=c,e.title="",b.$on("videoSetUpdated",function(){e.fileName=a.fileName,e.fileSource=a.fileSource}),d()}function ModalController(a,b,c,d){function e(){h.currentVideoURL=" "}function f(a){console.log("escape!"),27===a.which&&e()}function g(){}var h=this;h.currentVideoID=c.currentVideoID,h.currentVideoViews=c.currentVideoViews,h.currentVideoURL=c.currentVideoURL,h.openSocial=d.openSocial,h.rarityStart=c.rarityStart,h.rarityDescription=c.rarityDescription,h.modalClass=c.modalClass,h.FB=d.urlFB,h.TW=d.urlTW,h.GP=d.urlGP,h.RD=d.urlRD,h.YT=d.urlYT,h.LK=d.urlLK,h.clearCurrentVideo=e,h.escapeButton=f,a.$on("currentVideoUpdated",function(){h.currentVideoID=c.currentVideoID,h.currentVideoViews=c.currentVideoViews,h.currentVideoURL=c.currentVideoURL,h.rarityStart=c.rarityStart,h.rarityDescription=c.rarityDescription,h.modalClass=c.modalClass,angular.element(document.querySelector("#myModal")).modal("show")}),a.$on("socialUpdated",function(){h.FB=d.urlFB,h.TW=d.urlTW,h.GP=d.urlGP,h.RD=d.urlRD,h.YT=d.urlYT,h.LK=d.urlLK}),g()}function NavController(a,b){function c(a){return a===b.path()?!0:!1}function d(){}var e=this;e.checkActive=c,d()}function QuoteController(a,b,c){function d(a){function d(){var d=$(".thmbShow").length,f=b.currentVideoSet.length;d==f&&(a.thumbsReady=!0,a.getRandomQuote(),c.$apply(),clearInterval(e))}var e=setInterval(d,100)}function e(){}var f=this;f.quote=a.quote,f.author=a.author,f.url=a.url,f.getRandomQuote=a.getRandomQuote,f.empty=b.empty,f.thumbsReady=!1,c.$on("retrievingVideos",function(){f.thumbsReady=!1}),c.$on("videoSetUpdated",function(){f.currentVideoSet=b.currentVideoSet,f.empty=b.empty,f.empty?f.thumbsReady=!1:d(f)}),c.$on("quoteUpdated",function(){f.quote=a.quote,f.author=a.author,f.url=a.url}),e()}function SwingMissController(a,b){function c(){a.retrieveVideoSet()}function d(){}var e=this;e.retrieveVideoSet=c,e.consolation="",b.$on("videoSetUpdated",function(){e.consolation=a.consolation}),d()}function ThumbnavController(a,b){function c(){a.retrieveVideoSet()}function d(b){a.setCurrentVideo(b)}function e(){}var f=this;f.currentVideoSet=a.currentVideoSet,f.retrieveVideoSet=c,f.setCurrentVideo=d,f.empty=a.empty,b.$on("videoSetUpdated",function(){f.currentVideoSet=a.currentVideoSet,f.empty=a.empty}),e()}function adsenseBlock(){var a={restrict:"A",translcude:!0,replace:!0,template:"<div ng-translcude></div>"};return a}function thumbnailPic(){var a={restrict:"A",replace:!0,template:['<div data-toggle="modal" data-target="#myModal" class="col-lg-3 col-md-4 col-xs-6 thmb" ng-click="thumbnav.setCurrentVideo( vid.id.videoId )">','<div class="thmbWrapper">','<img class="thmbHover"src="img/playButton.png" />','<img class="thmbVid" ng-src="{{ vid.snippet.thumbnails.medium.url }}" />',"</div>","</div>"].join(""),link:function(a,b,c){b.find(".thmbVid").bind("load",function(){b.addClass("thmbShow")})}};return a}function videoReset(){var a={restrict:"A"};return a}function videoSearchTerm(){var a={restrict:"A",replace:!0,template:['<div class="videoSearchTerm" ng-hide="header.fileName == \'\'">','<span class="videoFileSource">{{ header.fileSource }} </span>','<span class="videoFileName">{{ header.fileName }}</span>',"{{ header.title }}","</div>"].join("")};return a}function quoteService(a){function b(){var b=c.length,e=Math.floor(Math.random()*b);d.author=c[e].author,d.quote=c[e].quote,d.url=c[e].url,a.$broadcast("quoteUpdated")}var c=[{quote:"Everything has beauty, but not everyone sees it.",author:"Confucius",url:"http://en.wikipedia.org/wiki/Confucius"},{quote:"Vision is the art of seeing what is invisible to others.",author:"Jonathan Swift",url:"http://en.wikipedia.org/wiki/Jonathan_Swift"},{quote:"Every day, three times per second, we produce the equivalent of the amount of data that the Library of Congress has in its entire print collection, right? But most of it is like cat videos on YouTube or 13-year-olds exchanging text messages about the next Twilight movie.",author:"Nate Silver",url:"http://en.wikipedia.org/wiki/Nate_Silver"},{quote:"YouTube is found footage. It's here to stay, and people will always come up with new concepts that will make sense for found footage.",author:"Jason Blum",url:"http://en.wikipedia.org/wiki/Jason_Blum"},{quote:"All the world's a stage, and all the men and women merely players",author:"William Shakespeare",url:"http://en.wikipedia.org/wiki/William_Shakespeare"},{quote:"We don't see things as they are, we see them as we are.",author:"Ana"+String.fromCharCode(239)+"s Nin",url:"http://en.wikipedia.org/wiki/Ana%C3%AFs_Nin"},{quote:"People generally see what they look for, and hear what they listen for.",author:"Harper Lee",url:"http://en.wikipedia.org/wiki/Harper_Lee"},{quote:"Every viewer is going to get a different thing. That's the thing about painting, photography, cinema.",author:"David Lynch",url:"http://en.wikipedia.org/wiki/David_Lynch"},{quote:"The voyage of discovery is not in seeking new landscapes but in having new eyes.",author:"Marcel Proust",url:"http://en.wikipedia.org/wiki/Marcel_Proust"},{quote:"There'll always be serendipity involved in discovery.",author:"Jeff Bezos",url:"http://en.wikipedia.org/wiki/Jeff_Bezos"},{quote:"This joy of discovery is real, and it is one of our rewards. So too is the approval of our work by our peers.",author:"Henry Taube",url:"http://en.wikipedia.org/wiki/Henry_Taube"},{quote:"If you do not expect the unexpected you will not find it, for it is not to be reached by search or trail.",author:"Heraclitus",url:"http://en.wikipedia.org/wiki/Heraclitus"},{quote:"Search others for their virtue, and yourself for your vices.",author:"Buckminster Fuller",url:"http://en.wikipedia.org/wiki/Buckminster_Fuller"},{quote:"He who would search for pearls must dive below.",author:"John Dryden",url:"http://en.wikipedia.org/wiki/John_Dryden"},{quote:"If you want to understand today, you have to search yesterday.",author:"Pearl S. Buck",url:"http://en.wikipedia.org/wiki/Pearl_S._Buck"},{quote:"I know well what I am fleeing from but not what I am in search of.",author:"Michel de Montaigne",url:"http://en.wikipedia.org/wiki/Michel_de_Montaigne"},{quote:"If you think about YouTube, YouTube is a 'searching the world's videos' problem, right? They all have to be there, but how do you find them? What I guess I'm trying to say is that search is still the killer app.",author:"Eric Schmidt",url:"http://en.wikipedia.org/wiki/Eric_Schmidt"},{quote:"I basically watch videos online all day long.",author:"Chad Hurley",url:"http://en.wikipedia.org/wiki/Chad_Hurley"}],d={author:"",quote:"",showQuoteAd:"",getRandomQuote:b};return d}function socialService(a){function b(b){var c="http%3A%2F%2Funderviewed.com%2Fvideos%2F";d.urlFB="http://www.facebook.com/sharer/sharer.php?u="+c+b,d.urlTW="http://twitter.com/home?status=I%20discovered%20this%20totally%20random%20video:%20"+c+b+"%20%23underviewed",d.urlGP="http://plus.google.com/share?url="+c+b,d.urlRD="http://www.reddit.com/submit?url="+c+b+"&title=Underviewed%20Video:%20",d.urlYT="http://www.youtube.com/watch?v="+b,d.urlLK="http://underviewed.com/videos/"+b,a.$broadcast("socialUpdated")}function c(a){window.open(a,"_blank")}var d={urlFB:"",urlTW:"",urlGP:"",urlRD:"",urlYT:"",urlLK:"",getSocialURLs:b,openSocial:c};return d}function youtubeService(a,b,c,d,e){function f(b){return console.log("id: "+b),x(b),a.get(n).then(function(a){var b=a.data.items[0];g(b)})}function g(a){A.currentVideoID=a.id,A.currentVideoViews=a.statistics.viewCount,A.currentVideoURL="https://www.youtube.com/embed/"+a.id+"?autoplay=1&rel=0&showinfo=0",h(parseInt(a.statistics.viewCount)),c.$broadcast("currentVideoUpdated")}function h(a){if(0===a)return A.rarityStart="Unique!",A.rarityDescription="Wow - no one else has ever seen this video! Not even once!",void(A.modalClass="alert-success");if(1===a)return A.rarityStart="Singular!",A.rarityDescription="Wow, the only other person who's seen this is the person who recorded it!",void(A.modalClass="alert-success");if(a>0&&10>a)return A.rarityStart="Very rare video!",A.rarityDescription="There are less than 10 views. Nice find!",void(A.modalClass="alert-success");if(a>=10&&20>a)return A.rarityStart="Rare video!",A.rarityDescription="Less than 20 views. It could be anything.",void(A.modalClass="alert-info");if(a>=20&&50>a)return A.rarityStart="Undiscovered video!",A.rarityDescription="This is the viral sweet spot, somewhere between 20 - 50 views.",void(A.modalClass="alert-info");if(a>=50&&100>a)A.rarityStart="Lesser known video.",A.rarityDescription="Quietly anonymous, but still under 100 views.",A.modalClass="alert-info";else{if(a>=100&&200>a)return A.rarityStart="On the cusp.",A.rarityDescription="Between 100 - 200 views. Looks like this may have been passed around in the family newsletter.",void(A.modalClass="alert-warning");if(a>=200&&300>a)return A.rarityStart="Normal video.",A.rarityDescription="Between 200 - 300 views. A lot of people have seen this already, but perhaps it's worth sharing?",void(A.modalClass="alert-warning");if(a>=300)return A.rarityStart="Commonplace video.",A.rarityDescription="At over 300 views, this video has definitely been seen. But it's not viral... yet.",void(A.modalClass="alert-danger")}}function i(){A.consolation=y[z],z++,z>y.length-1&&(z=0)}function j(){return w(),A.fileName=o,A.fileSource=p,s(),c.$broadcast("retrievingVideos"),a.get(m).then(function(a){A.currentVideoSet=a.data.items,a.data.items.length>0?A.empty=!1:(A.empty=!0,i()),c.$broadcast("videoSetUpdated")})}function k(a){f(a),e.getSocialURLs(a)}function l(){A.currentVideoURL="",c.$broadcast("currentVideoUpdated")}var m="",n="",o="",p="",q="https://www.googleapis.com/youtube/v3/",r="";apikey="AIzaSyClCC8p1WSOHtE5cNEuWbiD2P4ncgQQuWA",type="video",maxResults=20,videoDuration="short",searchPart="snippet",videosPart="statistics",searchFields="items(id(videoId)%2Csnippet(thumbnails(medium)))",videosFields="items(id%2Cstatistics(viewCount))",rarityStart="",rarityDescription="",z="",consolation="";var s=function(){r="search",m=q+r+"?key="+apikey+"&type="+type+"&videoDuration="+videoDuration+"&q="+o+"&part="+searchPart+"&fields="+searchFields+"&maxResults="+maxResults+"&safeSearch=moderate&order=date"},t=function(a){p=a},u=function(){var a=function(a,b){var c="";if(void 0!==b)c=b;else for(var d=0;a>d;d++)c+="9";for(var e=Math.ceil(Math.random()*c),f=a-e.toString().length,g="",d=0;f>d;d++)g+="0";var h=g+e;return h.toString()};switch(Math.ceil(25*Math.random())){case 1:var b="IMG_"+a(4)+".MOV";t("iPhone");break;case 2:var b="MVI_"+a(4)+".MOV";t("Canon");break;case 3:var b="MVI_"+a(4)+".AVI";t("Canon");break;case 4:var b=v(2002)+"_";t("Samsung");break;case 5:var b="VID_"+v(2010);t("Android");break;case 6:var b="DSC_"+a(4)+".MOV";t("Nikon");break;case 7:var b="00"+a(3)+".MTS";t("Sony");case 8:var b="MVI_"+a(4)+".MP4";t("Canon");break;case 9:var b="SAM_"+a(4,2e3)+".MP4";t("Samsung");break;case 10:var b="GOPR"+a(4,2e3)+".MP4";t("GoPro");break;case 11:var b="DSC"+a(5,200)+".MTS";t("Sony");break;case 12:var b="MOV_"+a(4,1200)+".mp4";t("Sony");break;case 13:var b="0"+a(4,1200)+".mts";t("Sony");break;case 14:var b=a(4,3e3)+".mts";t("Sony");break;case 15:var b="WP_"+v(2012)+"_";t("Nokia");break;case 16:var b="IMG"+a(4)+".MOV";t("Pentax");break;case 17:var b="REC"+a(4,40)+".MOV";t("Mobius");break;case 18:var b="DSCN"+a(4)+".MOV";t("Nikon");break;case 19:var b=a(4)+".mov";t("Nikon");break;case 20:var b="CAM"+a(5,2e3)+".MP4";t("LG");break;case 21:var b="MINI"+a(4,100)+".MOV";t("Keychain Cam");break;case 22:var b="VIDEO"+a(4,4e3)+".MOV";t("HTC");break;case 23:var b="DSCF"+a(4)+".MOV";t("Fujifilm");break;case 24:var c=["jpg","gif","swf","mov","avi","mpg","flv","mkv","webm","qt","mpeg","mp4","wmv","rm","asf","m4v","m2v","3gp","3g2","mxf"],d=Math.ceil(Math.random()*c.length)-1,e=Math.ceil(100*Math.random());if(e%2==0)var f="untitled";else var f="test";var b=f+"."+c[d];t(0==d?"JPG? WHY?":"Miscellaneous");break;case 25:var d=Math.ceil(1e3*Math.random()),b="Movie "+d+".mov";t("QuickTime");break;default:var b="GOPR"+a(4,2e3)+".MP4";t("GoPro")}return b},v=function(a){var b=new Date,c=b.getFullYear(),d=Math.floor(Math.random()*(c-a+1)+a),e=Math.floor(13*Math.random()+1),f=new Date(d,e,0).getDate(),g=Math.floor(Math.random()*(f-1+1)+1);return 10>e&&(e="0"+e),10>g&&(g="0"+g),13==e&&(e=12),d.toString()+e.toString()+g.toString()},w=function(a){o=u()},x=function(a){r="videos",n=q+r+"?id="+a+"&key="+apikey+"&part="+videosPart+"&fields="+videosFields},y=["Swing and a miss.","It happens.","Don't stop believin'.","Eyes on the prize.","You'll get there.","Don't get discouraged."],z=Math.floor(Math.random()*y.length),A={currentVideoSet:null,retrieveVideoSet:j,setCurrentVideo:k,clearCurrentVideo:l,currentVideoID:"",currentVideoURL:"",rarityStart:"",rarityDescription:"",modalClass:"",currentVideoViews:"",fileName:"",fileSource:"",consolation:consolation,empty:"false"};return A}angular.module("uv",["ngRoute","ngAnimate"]).config(["$sceDelegateProvider","$locationProvider","$routeProvider",function(a,b,c){a.resourceUrlWhitelist(["self","https://www.youtube.com/embed/**"]),b.html5Mode(!0),c.when("/",{templateUrl:"/views/videoMain.html",resolve:{clearVideo:["$route","youtubeService",function(a,b){b.clearCurrentVideo()}]}}).when("/about/",{templateUrl:"/views/about.html"}).when("/videos/:videoId/",{templateUrl:"/views/videoMain.html",resolve:{startup:["$route","youtubeService",function(a,b){b.retrieveVideoSet()}],getVideo:["$route","youtubeService",function(a,b){var c=a.current.params.videoId;b.setCurrentVideo(c)}]}}).otherwise({redirectTo:"/"})}]).run(["$route","youtubeService",function(a,b){b.clearCurrentVideo(),b.retrieveVideoSet()}]),angular.module("uv").controller("AlertController",AlertController),angular.module("uv").controller("HeaderController",HeaderController),HeaderController.$inject=["youtubeService","$scope"],angular.module("uv").controller("ModalController",ModalController),ModalController.$inject=["$scope","$sce","youtubeService","socialService"],angular.module("uv").controller("NavController",NavController),NavController.$inject=["$scope","$location"],angular.module("uv").controller("QuoteController",QuoteController),QuoteController.$inject=["quoteService","youtubeService","$scope"],angular.module("uv").controller("SwingMissController",SwingMissController),SwingMissController.$inject=["youtubeService","$scope"],angular.module("uv").controller("ThumbnavController",ThumbnavController),ThumbnavController.$inject=["youtubeService","$scope"],angular.module("uv").directive("adsenseBlock",adsenseBlock),angular.module("uv").directive("thumbnailPic",thumbnailPic),angular.module("uv").directive("videoReset",videoReset),angular.module("uv").directive("videoSearchTerm",videoSearchTerm),angular.module("uv").factory("quoteService",quoteService),quoteService.$inject=["$rootScope"],angular.module("uv").factory("socialService",socialService),socialService.$inject=["$rootScope"],angular.module("uv").factory("youtubeService",youtubeService),youtubeService.$inject=["$http","$q","$rootScope","quoteService","socialService"];